# 請求先停止(複数)

`/api/billing/bulk_stop`

複数の請求先情報停止処理を実行します。
リクエストデータに請求先部署情報が存在する場合は請求先部署を停止します。
請求先部署情報が存在しない場合は請求先情報を停止します。

## アウトライン

- [リクエスト](#リクエスト)
- [レスポンス](#レスポンス)
- [使用例](#使用例)
  - [リクエスト例](#リクエスト例)
  - [レスポンス例](#レスポンス例)
- [エラー](#エラー)

## リクエスト
- Method URL: `https://billing-robo.jp:10443/api/billing/bulk_stop`
- Preferred HTTP method: `POST`
- Accepted content types: `application/json`
- Encode: `UTF-8`

### Parameters

| 名前                        | 概要                                 | 桁数 | 種別                              | 必須 |
| --------------------------- | ------------------------------------ | ---- | --------------------------------- | ---- |
| user_id                     | ユーザーID（管理画面へのログインID） | 100  | [メール形式](../../index.md#種別) | 必須 |
| access_key                  | アクセスキー                         | 100  | [半角英数](../../index.md#種別)   | 必須 |
| [billing](#billing-request) | 請求先に属するパラメータ             |      | `array`                  |      |

#### billing (request)

<!-- 要素が多くないものは detail, summaryタグを使わない (なくても見やすくため) -->
下記のような項目のオブジェクトを持つリスト

| 名前                                             | 概要                                                                          | 桁数 | 種別                                   | 必須 |
| ------------------------------------------------ | ----------------------------------------------------------------------------- | ---- | -------------------------------------- | ---- |
| code                                             | 請求先コード  <br> 両端のスペース除去                                         | 20   | [半角英数 + 記号](../../index.md#種別) | 必須 |
| user_id                                          | 登録ユーザーID <br> ※セールスフォース利用企業の場合はセールスフォースIDを入力 | 100  | 文字列                                 |      |
| [billing_individual](#billingindividual-request) | 請求先部署に属するパラメータ                                                  |      | `array`            |      |

#### billing_individual (request)

<!-- 要素が多くないものは detail, summaryタグを使わない (なくても見やすくため) -->
下記のような項目のオブジェクトを持つリスト

| 名前    | 概要                                                                                                | 桁数 | 種別                                   | 必須 |
| ------- | --------------------------------------------------------------------------------------------------- | ---- | -------------------------------------- | ---- |
| number  | 請求先部署番号 <br> ※セールスフォース利用企業の場合はオブジェクトIDを入力 <br> 両端のスペース除去   | 20   | 文字列                                 |      |
| code    | 請求先部署コード <br> ※セールスフォース利用企業の場合はオブジェクトIDを入力 <br> 両端のスペース除去 | 20   | [半角英数 + 記号](../../index.md#種別) |      |
| user_id | 登録ユーザーID <br> ※セールスフォース利用企業の場合はセールスフォースIDを入力                       | 100  | 文字列                                 |      |


## レスポンス

- Type: `application/json`
- Encode: `UTF-8`

### Fields

| 名前                         | 概要                                 | 型               |
| ---------------------------- | ------------------------------------ | ---------------- |
| user_id                      | ユーザーID（管理画面へのログインID） | string           |
| access_key                   | アクセスキー                         | string           |
| [billing](#billing-response) | 請求先に属するパラメータ             | `array` |

#### billing (response)

<!-- 要素が多くないものは detail, summaryタグを使わない (なくても見やすくため) -->
下記のような項目のオブジェクトを持つリスト

| 名前                                              | 概要                                      | 型                          |
| ------------------------------------------------- | ----------------------------------------- | --------------------------- |
| error_code                                        | エラーコード <br> ※エラー時以外はNULL     | int                         |
| error_message                                     | エラーメッセージ <br> ※エラー時以外はNULL | string                      |
| code                                              | 請求先コード                              | string                      |
| user_id                                           | 登録ユーザーID                            | string                      |
| [billing_individual](#billingindividual-response) | 請求先部署に属するパラメータ              | `array` |

#### billing_individual (response)

<!-- 要素が多くないものは detail, summaryタグを使わない (なくても見やすくため) -->
下記のような項目のオブジェクトを持つリスト

| 名前    | 概要             | 型     |
| ------- | ---------------- | ------ |
| number  | 請求先部署番号   | int    |
| code    | 請求先部署コード | string |
| user_id | 登録ユーザーID   | string |


## 使用例

### リクエスト例

```json
{
    "user_id": "sample@robotpayment.co.jp",
    "access_key": "xxxxxxxxxxxxxxxx",
    "billing": [
        {
            "code": "billing",
            "user_id": "user@sample.co.jp",
            "billing_individual": [
                {
                    "code": "bicd0001",
                    "user_id": "user@sample.co.jp"
                }
            ]
        }
    ]
}
```

### レスポンス例

Status: 200 OK

```json
{
    "user": {
        "user_id": "sample@robotpayment.co.jp",
        "access_key": "xxxxxxxxxxxxxxxx",
        "billing": [
            {
                "error_code": null,
                "error_message": null,
                "code": "billing",
                "user_id": "user@sample.co.jp",
                "billing_individual": [
                    {
                        "number": 1,
                        "code": "bicd0001",
                        "user_id": "user@sample.co.jp"
                    }
                ]
            }
        ]
    }
}
```

## エラー

[共通エラー](../../index.md#共通エラー)

個別エラー

| エラーコード | 内容                                     |
| ------------ | ---------------------------------------- |
| 901          | リクエストパラメータに請求先が存在しない |
| 902          | 請求先が存在しない                       |
| 903          | 請求先が既に停止されている               |
| 904          | 請求先コードが不正                       |
| 905          | 登録ユーザーIDが不正                     |
| 906          | 請求先停止に失敗                         |
| 907          | 請求先部署が存在しない                   |
| 908          | 請求先部署が既に停止されている           |
| 909          | 請求先に紐づく請求先部署がなくなる       |
| 910          | 請求先部署停止に失敗                     |
| 911          | 請求先部署コードが不正                   |
