<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Webhook請求書発行イベント | billing-robo-apispec</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Webhook請求書発行イベント" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="請求管理ロボのAPI仕様書" />
<meta property="og:description" content="請求管理ロボのAPI仕様書" />
<link rel="canonical" href="http://0.0.0.0:4000/webhook/webhook_bill.html" />
<meta property="og:url" content="http://0.0.0.0:4000/webhook/webhook_bill.html" />
<meta property="og:site_name" content="billing-robo-apispec" />
<script type="application/ld+json">
{"headline":"Webhook請求書発行イベント","url":"http://0.0.0.0:4000/webhook/webhook_bill.html","description":"請求管理ロボのAPI仕様書","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/assets/css/style.css?v=a2c448b5d116447955cb01efe3799a738dc0e23f">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">billing-robo-apispec</h1>
      <h2 class="project-tagline">請求管理ロボのAPI仕様書</h2>
      
        <a href="https://github.com/ROBOTPAYMENT/billing-robo-apispec" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <h1 id="webhook請求書発行イベント">Webhook請求書発行イベント</h1>

<p><code class="language-plaintext highlighter-rouge">Webhook URLはWebhook管理画面から設定が可能です。</code></p>

<p>請求書発行する際、その情報をWebhookとして通知します。
(手動請求書発行、自動請求書発行、請求書再発行)</p>

<h2 id="アウトライン">アウトライン</h2>

<ul>
  <li><a href="#リクエスト">リクエスト</a>
    <ul>
      <li><a href="#共通リクエストパラメータ">共通リクエストパラメータ</a>
        <ul>
          <li><a href="#event_detail-request">event_detail (request)</a></li>
        </ul>
      </li>
      <li><a href="#サンプル">サンプル</a></li>
    </ul>
  </li>
</ul>

<h2 id="リクエスト">リクエスト</h2>
<ul>
  <li>HTTP method: <code class="language-plaintext highlighter-rouge">POST</code></li>
  <li>Accepted content types: <code class="language-plaintext highlighter-rouge">application/json</code></li>
  <li>Encode: <code class="language-plaintext highlighter-rouge">UTF-8</code></li>
</ul>

<h3 id="共通リクエストパラメータ">共通リクエストパラメータ</h3>

<p>下記の項目を持つJSONオブジェクトです。</p>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>型</th>
      <th>概要</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BillingRoboSignaturekey</td>
      <td>string</td>
      <td>ロボで自動生成する <br /> Webhookページで更新可能</td>
    </tr>
    <tr>
      <td>org</td>
      <td>string</td>
      <td>BillingRobo_RobotPayment</td>
    </tr>
    <tr>
      <td>event_name</td>
      <td>string</td>
      <td>ウェブフックイベントの名称 <br /> bill_issue</td>
    </tr>
    <tr>
      <td>regist_time</td>
      <td>string</td>
      <td>イベント発生時刻</td>
    </tr>
    <tr>
      <td>notification_time</td>
      <td>string</td>
      <td>イベント通知時刻</td>
    </tr>
    <tr>
      <td>billing_source_id</td>
      <td>int</td>
      <td>請求元ID</td>
    </tr>
    <tr>
      <td><a href="#event_detail-request">event_detail</a></td>
      <td>array</td>
      <td>イベント詳細</td>
    </tr>
  </tbody>
</table>

<h4 id="event_detail-request">event_detail (request)</h4>

<p>共通リクエストパラメータのevent_detailの中身</p>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>型</th>
      <th>概要</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>billing_number</td>
      <td>string</td>
      <td>請求書番号</td>
    </tr>
    <tr>
      <td>type</td>
      <td>int</td>
      <td>請求書タイプ<br /> 1:請求 2:繰越請求 3:親請求書 4:子請求書</td>
    </tr>
    <tr>
      <td>bill_issue_date</td>
      <td>string</td>
      <td>請求書発行日<br /></td>
    </tr>
    <tr>
      <td>make_date</td>
      <td>string</td>
      <td>請求書作成日</td>
    </tr>
    <tr>
      <td>billing_individual_number</td>
      <td>int</td>
      <td>請求先部署番号</td>
    </tr>
    <tr>
      <td>billing_method</td>
      <td>int</td>
      <td>請求方法<br /> 0：送付なし 1：自動メール 2：手動メール 3：自動郵送 4：手動郵送 5：自動メール＋手動郵送 6：手動メール+手動郵送</td>
    </tr>
    <tr>
      <td>bill_sending_scheduled_date</td>
      <td>string</td>
      <td>請求送付予定日</td>
    </tr>
    <tr>
      <td>payment_method</td>
      <td>int</td>
      <td>決済手段 <br /> 0:銀行振込 1:クレジットカード 2:バンクチェック <br /> 3:RP口座振替 4:RL口座振替 5:その他口座振替 <br /> 6:コンビニ払込票(A4)  7:コンビニ払込票(ハガキ) <br /> 8:その他コンビニ払込票</td>
    </tr>
    <tr>
      <td>demand_number</td>
      <td>int</td>
      <td>請求件数</td>
    </tr>
    <tr>
      <td>subtotal_amount_billed</td>
      <td>int</td>
      <td>請求金額小計</td>
    </tr>
    <tr>
      <td>consumption_tax_amount</td>
      <td>int</td>
      <td>消費税額</td>
    </tr>
    <tr>
      <td>total_bill_detail_consumption_tax_amount</td>
      <td>int</td>
      <td>明細毎消費税合計</td>
    </tr>
    <tr>
      <td>withholding_tax_amount</td>
      <td>int</td>
      <td>源泉所得税額</td>
    </tr>
    <tr>
      <td>total_amount_billed</td>
      <td>int</td>
      <td>請求金額合計</td>
    </tr>
  </tbody>
</table>

<h3 id="サンプル">サンプル</h3>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"BillingRoboSignaturekey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$2y$10$ee1ZuZ6XSxEkzq9egVTLL.OlU7wb/WCgY0ORQyCZpfiDnhoPH2rXu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"org"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BillingRobo_RobotPayment"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill_issue"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"regist_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-06 08:09:26"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notification_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-06 05:09:32"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billing_source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event_detail"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"billing_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201912-sample-3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bill_issue_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"make_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019/12/06"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billing_individual_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billing_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bill_sending_scheduled_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-25"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"demand_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subtotal_amount_billed"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"consumption_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_bill_detail_consumption_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="nl">"withholding_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_amount_billed"</span><span class="p">:</span><span class="w"> </span><span class="mi">10800</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p><a href="/">TOPへ戻る</a></p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/ROBOTPAYMENT/billing-robo-apispec">billing-robo-apispec</a> is maintained by <a href="https://github.com/ROBOTPAYMENT">ROBOTPAYMENT</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
