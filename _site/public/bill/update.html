<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>請求書更新 | billing-robo-apispec</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="請求書更新" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="請求管理ロボのAPI仕様書" />
<meta property="og:description" content="請求管理ロボのAPI仕様書" />
<link rel="canonical" href="http://0.0.0.0:4000/public/bill/update.html" />
<meta property="og:url" content="http://0.0.0.0:4000/public/bill/update.html" />
<meta property="og:site_name" content="billing-robo-apispec" />
<script type="application/ld+json">
{"headline":"請求書更新","url":"http://0.0.0.0:4000/public/bill/update.html","description":"請求管理ロボのAPI仕様書","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/assets/css/style.css?v=a2c448b5d116447955cb01efe3799a738dc0e23f">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">billing-robo-apispec</h1>
      <h2 class="project-tagline">請求管理ロボのAPI仕様書</h2>
      
        <a href="https://github.com/ROBOTPAYMENT/billing-robo-apispec" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <h1 id="請求書更新">請求書更新</h1>

<p><code class="language-plaintext highlighter-rouge">/api/v1.0/bill/update</code></p>

<p>請求書の更新処理を実行します。</p>

<h2 id="アウトライン">アウトライン</h2>

<ul>
  <li><a href="#リクエスト">リクエスト</a></li>
  <li><a href="#レスポンス">レスポンス</a></li>
  <li><a href="#使用例">使用例</a>
    <ul>
      <li><a href="#リクエスト例">リクエスト例</a></li>
      <li><a href="#レスポンス例">レスポンス例</a></li>
    </ul>
  </li>
  <li><a href="#エラー">エラー</a></li>
</ul>

<h2 id="リクエスト">リクエスト</h2>
<ul>
  <li>Method URL: <code class="language-plaintext highlighter-rouge">https://billing-robo.jp:10443/api/v1.0/bill/update</code></li>
  <li>Preferred HTTP method: <code class="language-plaintext highlighter-rouge">POST</code></li>
  <li>Accepted content types: <code class="language-plaintext highlighter-rouge">application/json</code></li>
  <li>Encode: <code class="language-plaintext highlighter-rouge">UTF-8</code></li>
</ul>

<h3 id="parameters">Parameters</h3>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>概要</th>
      <th>桁数</th>
      <th>種別</th>
      <th>必須</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>user_id</td>
      <td>ユーザーID（管理画面へのログインID）</td>
      <td>100</td>
      <td><a href="/#種別">メール形式</a></td>
      <td>必須</td>
    </tr>
    <tr>
      <td>access_key</td>
      <td>アクセスキー</td>
      <td>100</td>
      <td><a href="/#種別">半角英数</a></td>
      <td>必須</td>
    </tr>
    <tr>
      <td><a href="#bill-request">bill</a></td>
      <td>請求書に属するパラメータ</td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">array</code></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="bill-request">bill (request)</h4>

<p>下記のような項目のオブジェクトを持つリスト</p>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>概要</th>
      <th>桁数</th>
      <th>種別</th>
      <th>必須</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>number</td>
      <td>請求書番号</td>
      <td>100</td>
      <td><a href="/#種別">半角英数 + 記号</a></td>
      <td>必須</td>
    </tr>
    <tr>
      <td>billing_code</td>
      <td>請求先コード</td>
      <td>20</td>
      <td><a href="/#種別">半角英数 + 記号</a></td>
      <td>必須</td>
    </tr>
    <tr>
      <td>message_column</td>
      <td>通信欄</td>
      <td>112</td>
      <td>文字列</td>
      <td> </td>
    </tr>
    <tr>
      <td>sending_scheduled_date</td>
      <td>請求書送付予定日</td>
      <td>10</td>
      <td>日付</td>
      <td><a href="#必須条件詳細">(消込未完了時)</a></td>
    </tr>
    <tr>
      <td>sending_date</td>
      <td>請求書送付日</td>
      <td>10</td>
      <td>日付</td>
      <td> </td>
    </tr>
    <tr>
      <td>transfer_deadline</td>
      <td>決済期限</td>
      <td>10</td>
      <td>日付</td>
      <td><a href="#必須条件詳細">(消込未完了時)</a></td>
    </tr>
    <tr>
      <td>payment_status</td>
      <td>消込ステータス <br /> 0:未処理 2:確認済み 3:未収 4:貸倒 5:手数料 6:現金 7:長期滞留債権 8:破産更生債権 9:売上取消</td>
      <td>2</td>
      <td>数値</td>
      <td> </td>
    </tr>
    <tr>
      <td>erasure_deposit_date</td>
      <td>消込計上日</td>
      <td>10</td>
      <td>日付</td>
      <td><a href="#必須条件詳細">(消込時)</a></td>
    </tr>
    <tr>
      <td>erasure_cancel_date</td>
      <td>キャンセル計上日</td>
      <td>10</td>
      <td>日付</td>
      <td><a href="#必須条件詳細">(消込取消時)</a></td>
    </tr>
    <tr>
      <td>memo</td>
      <td>メモ</td>
      <td>300</td>
      <td>文字列</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="必須条件詳細">必須条件詳細</h4>

<table>
  <thead>
    <tr>
      <th>必須条件</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>(消込未完了時)</td>
      <td>消込ステータスが完了になっていない場合に必須</td>
    </tr>
    <tr>
      <td>(消込時)</td>
      <td>消込ステータスを「未処理・未収」から「未処理・未収以外」へ変更する場合に必須</td>
    </tr>
    <tr>
      <td>(消込取消時)</td>
      <td>消込スタータすを「未処理・未収以外」から「未処理・未収」へ変更する場合に必須</td>
    </tr>
  </tbody>
</table>

<h2 id="レスポンス">レスポンス</h2>

<ul>
  <li>Type: <code class="language-plaintext highlighter-rouge">application/json</code></li>
  <li>Encode: <code class="language-plaintext highlighter-rouge">UTF-8</code></li>
</ul>

<h3 id="fields">Fields</h3>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>概要</th>
      <th>型</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>user_id</td>
      <td>ユーザーID</td>
      <td>string</td>
    </tr>
    <tr>
      <td>access_key</td>
      <td>アクセスキー</td>
      <td>string</td>
    </tr>
    <tr>
      <td>error_code</td>
      <td>エラーコード <br /> ※正常時はnull</td>
      <td>string</td>
    </tr>
    <tr>
      <td>error_message</td>
      <td>エラーメッセージ <br /> ※正常時はnull</td>
      <td>string</td>
    </tr>
    <tr>
      <td><a href="#bill-response">bill</a></td>
      <td>請求書に属するパラメータ</td>
      <td><code class="language-plaintext highlighter-rouge">array</code></td>
    </tr>
  </tbody>
</table>

<h4 id="bill-response">bill (response)</h4>

<p>下記のような項目のオブジェクトを持つリスト</p>

<table>
  <thead>
    <tr>
      <th>名前</th>
      <th>概要</th>
      <th>型</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>number</td>
      <td>請求書番号</td>
      <td>string</td>
    </tr>
    <tr>
      <td>billing_code</td>
      <td>請求先コード</td>
      <td>string</td>
    </tr>
    <tr>
      <td>message_column</td>
      <td>通信欄</td>
      <td>string</td>
    </tr>
    <tr>
      <td>sending_scheduled_date</td>
      <td>請求書送付予定日</td>
      <td>string</td>
    </tr>
    <tr>
      <td>sending_date</td>
      <td>請求書送付日</td>
      <td>string</td>
    </tr>
    <tr>
      <td>transfer_deadline</td>
      <td>決済期限</td>
      <td>string</td>
    </tr>
    <tr>
      <td>payment_status</td>
      <td>消込ステータス</td>
      <td>int</td>
    </tr>
    <tr>
      <td>erasure_deposit_date</td>
      <td>消込計上日</td>
      <td>string</td>
    </tr>
    <tr>
      <td>erasure_cancel_date</td>
      <td>キャンセル計上日</td>
      <td>string</td>
    </tr>
    <tr>
      <td>memo</td>
      <td>メモ</td>
      <td>string</td>
    </tr>
  </tbody>
</table>

<h2 id="使用例">使用例</h2>

<h3 id="リクエスト例">リクエスト例</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample@robotpayment.co.jp"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"access_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxxxxxxxxxxxx"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201705-billing-1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"billing_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"message_column"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sending_scheduled_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"transfer_deadline"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"payment_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"erasure_deposit_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"erasure_cancel_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"memo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="レスポンス例">レスポンス例</h3>

<p>Status: 200 OK</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample@robotpayment.co.jp"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"access_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxxxxxxxxxxxx"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bill"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"error_message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201705-billing-1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"billing_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"message_column"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sending_scheduled_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017/05/01"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sending_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"transfer_deadline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017/05/31"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"payment_status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"erasure_deposit_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"erasure_cancel_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"memo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="エラー">エラー</h2>

<p><a href="/#共通エラー">共通エラー</a></p>

<p>個別エラー</p>

<table>
  <thead>
    <tr>
      <th>エラーコード</th>
      <th>内容</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1601</td>
      <td>請求書番号が不正</td>
    </tr>
    <tr>
      <td>1602</td>
      <td>請求先コードが不正</td>
    </tr>
    <tr>
      <td>1603</td>
      <td>通信欄が不正</td>
    </tr>
    <tr>
      <td>1604</td>
      <td>請求書送付予定日が不正</td>
    </tr>
    <tr>
      <td>1605</td>
      <td>請求書送付日が不正</td>
    </tr>
    <tr>
      <td>1606</td>
      <td>決済期限が不正</td>
    </tr>
    <tr>
      <td>1607</td>
      <td>消込ステータスが不正</td>
    </tr>
    <tr>
      <td>1608</td>
      <td>消込計上日が不正 <br /> - yyyy/mm/dd形式でない場合 <br /> - グレゴリオ暦の日付として妥当でない場合 <br /> - 必須時に入力がない場合 <br /> - 消込ステータスを貸倒(4)への変更時に、請求書に紐付く売上の計上日より前の日付の場合 <br /> - 消込ステータスを確認済み/貸倒/手数料/現金/長期滞留債権/破産更生債権(2,4~8)への変更時に、請求書発行日より前の日付の場合</td>
    </tr>
    <tr>
      <td>1609</td>
      <td>キャンセル計上日が不正</td>
    </tr>
    <tr>
      <td>1610</td>
      <td>請求書メモが不正</td>
    </tr>
    <tr>
      <td>1611</td>
      <td>既に締められた請求書発行日の場合、通信欄の編集できません。</td>
    </tr>
    <tr>
      <td>1612</td>
      <td>既に締められた売上が存在するため編集できません。</td>
    </tr>
    <tr>
      <td>1613</td>
      <td>既に締められた期間への計上日となるため編集できません。</td>
    </tr>
    <tr>
      <td>1614</td>
      <td>請求書更新に失敗</td>
    </tr>
    <tr>
      <td>1615</td>
      <td>請求書が存在しない</td>
    </tr>
    <tr>
      <td>1616</td>
      <td>決済手段がコンビニ払込票の場合は決済期限の編集不可</td>
    </tr>
    <tr>
      <td>1617</td>
      <td>消込ステータスが完了の場合メモ以外の任意項目の値は指定不可</td>
    </tr>
    <tr>
      <td>1618</td>
      <td>請求書が承認依頼中</td>
    </tr>
    <tr>
      <td>1619</td>
      <td>消込計上日とキャンセル計上日は同時に指定できません。</td>
    </tr>
    <tr>
      <td>1620</td>
      <td>再発行により無効になった請求書は有効にできません</td>
    </tr>
    <tr>
      <td>1621</td>
      <td>繰越請求は変更できません。</td>
    </tr>
    <tr>
      <td>1622</td>
      <td>消込が繰越の繰越ステータスは変更できません。</td>
    </tr>
    <tr>
      <td>1623</td>
      <td>請求先部署が無効または削除されている場合、決済期限は編集できません。</td>
    </tr>
  </tbody>
</table>

<hr />

<p><a href="/">TOPへ戻る</a></p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/ROBOTPAYMENT/billing-robo-apispec">billing-robo-apispec</a> is maintained by <a href="https://github.com/ROBOTPAYMENT">ROBOTPAYMENT</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
